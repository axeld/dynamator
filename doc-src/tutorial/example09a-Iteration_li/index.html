<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org" />
<title>Dynamator Example 9a: Creating a Dynamically Populated
List</title>
<link rel="StyleSheet" type="text/css" href="../../style.css" />
</head>
<body>
<h1>Creating a Dynamically Populated List</h1>

<p>This example shows how to output the elements of each JDK
sequenced collection supported by Dynamator (array, Vector,
Enumeration, Iterator). In this example, the list is a shopping
list.</p>

<h2>Page</h2>

<iframe width="600" height="170" src="ShoppingList.html"></iframe>

<h2>HTML</h2>

<p>To cause the content of the 'li' element to be subject to change
at run-time, add a 'class' attribute to the 'li' element.</p>

<p>When page displays a list of items, more than one item is
usually required to present sample data. The HTML page can be used
to display sample data that is not intended for inclusion in the
production system by marking each HTML element to be excluded with
the attribute 'class="Discard"'. When Dynamator detects a element
with a class or id with the identifier "Discard", it does not copy
the element or its children to the JSP page. The effect is the same
as using the element &lt;discard/&gt; in the Dynamator file. The
difference is in who can specify the attribute.</p>

<div class="column">
<div class="column-filename">ShoppingList.html</div>

<div class="html">
<div class='insert'>ShoppingList.html</div>
</div>
</div>

<div class="clear"></div>

<h2>Java class</h2>

<p>To make it easier to see what's going on, we've defined the Java
elements in the Dynamator file.</p>

<h2>Dynamator File</h2>

<p>To indicate that an HTML element should be repeated for each
element of a collection, add a 'foreach' element to the
'class' element in the Dynamator file.</p>

<div class="column">
<div class="column-filename">ShoppingList.dyn</div>

<div class="dyn">
<div class='insert'>ShoppingList.dyn</div>
</div>
</div>

<div class="clear"></div>

<p>The Dynamator file contains a 'foreach' element for each
repeating element in the HTML file. In each case, the 'foreach'
element contains an attribute to specify the type of the
collection, and an attribute to specify the name of the Java
variable that references the current element of the iteration. So,
for example, the first 'foreach' iterates over the array of Strings
referred to by variable 'dinner_', giving the variable name
'menuItem' to the current element.</p>

<p>The content of the 'foreach' element is a Java expression that
evaluates to a collection of the same type as specified in the
'type' attribute. In the example, the first two foreach elements
reference static collection variables, the third case references a
local method call that returns a collection, and the last case
references a method call on a local variable.</p>

<p>As elsewhere, the 'content' element within the 'class' element
causes the content of the referenced element to be replaced with
the content of the 'content' element. In each of these cases, the
content uses the variable referring to the current element of the
collection. To show that it doesn't have to be just the element,
the reminder content element adds something extra.</p>

<p>The format of the 'type' attribute is consistent across all
collection types except for arrays:</p>

<div class="column">
<div class="dyn"><i>
collection-type</i>[<i>collection-element-type</i>]</div>
</div>

<div class="clear"></div>

<h2>JSP file</h2>

<p>After processing with Dynamator, the resulting JSP file looks
like this:</p>

<div class="column">
<div class="column-filename">ShoppingList.jsp (generated by
Dynamator)</div>

<iframe src="ShoppingList_jsp.html" width="600" height="250" frameborder="1" scrolling="auto"></iframe>
</div>

<div class="clear"></div>

<p>Dynamator generates variable names to support iteration.
Generated names are based on the foreach expression. You can
specify your own variable names; see the documentation for
&lt;foreach&gt;. The dollar signs are valid Java, but are usually
only used by code generators, which is what Dynamator is. They are
used to ensure that generated names are readable but don't conflict
with any programmer-defined names.</p>

<div class="in-action">
<h2>In Action</h2>

<p>If you are viewing this page in a servlet engine, you can see <a
href="ShoppingList.jsp">the generated page in action</a>.</p>
</div>
</body>
</html>

